<?xml version="1.0" encoding="UTF-8" ?>
<Module>
<ModulePrefs title="-" />
<Content type="html"><![CDATA[

<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes">
    
    <link rel="shortcut icon" href="TemplateData/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="TemplateData/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="TemplateData/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="48x48" href="TemplateData/favicon-48x48.png">
    <link rel="icon" type="image/png" sizes="64x64" href="TemplateData/favicon-64x64.png">
    <link rel="icon" type="image/png" sizes="128x128" href="TemplateData/favicon-128x128.png">
    
    <link rel="stylesheet" href="TemplateData/style.css">
    <link rel="manifest" href="manifest.webmanifest">
  
  <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/10.2.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.2.0/firebase-analytics-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.2.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.2.0/firebase-remote-config-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.2.0/firebase-firestore-compat.js"></script>
    <script>
      if (window.location.href.includes("dev")) {
        const s = document.createElement("script");
        s.src = "firebase/firebase_dev.js";
        document.head.appendChild(s);
      }
    </script>
    
    <script src="firebase/firebase.js"></script>

    <!-- Xsolla Scripts -->
    <script src="xsolla/xsolla.js"></script>

    <script src="utils.js"></script>
  
  <script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}

   gtag('consent', 'default', {
    ad_storage: 'granted',
    analytics_storage: 'granted',
    ad_user_data: 'granted',
    ad_personalization: 'granted'
    });
    
    gtag('consent', 'default', {
    ad_storage: 'denied',
    analytics_storage: 'denied',
    ad_user_data: 'denied',
    ad_personalization: 'denied',
    region: [
      'AT','BE','BG','HR','CY','CZ','DK','EE','FI','FR',
      'DE','GR','HU','IE','IT','LV','LT','LU','MT','NL',
      'PL','PT','RO','SK','SI','ES','SE',
      'IS','LI','NO',
      'GB',
      'CH'
      ]
    });
  </script>
    
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZN6YDCFCY8" onload="onGtagLoaded()" onerror="onGtagLoaded()"> </script>

  <script>
    function onGtagLoaded() {
    if (window.playgamaScript) {
      return;
    }
    
    gtag('js', new Date());
    gtag('config', 'G-ZN6YDCFCY8');

    window.playgamaScript = document.createElement("script");
    window.playgamaScript.src = "https://playgama.com/ads/pockethaven.v0.1.js";
    window.playgamaScript.async = true;
    document.head.appendChild(window.playgamaScript);
    }
  </script>

    <style>
      body {
        background: #000;
      }
      
      #unity-canvas {
        outline: none;
      }
    </style>
  </head>
  <body>
    <div id="unity-container">
      <canvas id="unity-canvas" width="960" height="600" tabindex="-1" data-sl="canvas-lq"></canvas>
      <div id="unity-loading-bar">
        <div id="loading-logo"></div>
        <div id="unity-progress-bar-empty">
          <div id="unity-progress-bar-full"></div>
        </div>
      </div>
      <div id="unity-warning"> </div>
    </div>
    <script>
      var container = document.querySelector("#unity-container");
      var canvas = document.querySelector("#unity-canvas");
      var loadingBar = document.querySelector("#unity-loading-bar");
      var progressBarFull = document.querySelector("#unity-progress-bar-full");
      var warningBanner = document.querySelector("#unity-warning");

      function unityShowBanner(msg, type) {
        function updateBannerVisibility() {
          warningBanner.style.display = warningBanner.children.length ? 'block' : 'none';
        }
        var div = document.createElement('div');
        div.innerHTML = msg;
        warningBanner.appendChild(div);
        if (type == 'error') div.style = 'background: red; padding: 10px;';
        else {
          if (type == 'warning') div.style = 'background: yellow; padding: 10px;';
          setTimeout(function() {
            warningBanner.removeChild(div);
            updateBannerVisibility();
          }, 5000);
        }
        updateBannerVisibility();
      }

      // ===== Latest-commit pointer via GitHub Pages (plain text) =====
      // Put the current commit SHA (one line) here:
      // https://danidrorm.github.io/RGFiles/latest.txt
      var LATEST_TXT_URL = "https://danidrorm.github.io/RGFiles/latest.txt";

      // Base repo for jsDelivr
      var REPO_CDN_BASE = "https://cdn.jsdelivr.net/gh/Danidrorm/RGFiles@";

      // Your Unity build file names (relative to buildUrl)
      // If these hashes change per Unity build, just update them here once per build.
      // If you overwrite files with the SAME names, this still works because buildUrl is pinned to a commit.
      var UNITY_FILES = {
        loader: "b23dd96997961653e2825455633aac82.loader.js",
        data: "1c6b3fb6706375cf5f4e35c5d914385e.data.unityweb",
        framework: "98438f2e7a94945eb0c97aa68a131683.framework.js.unityweb",
        wasm: "def2138bbbbbb3dc09c6c604c4109263.wasm.unityweb",
      };

      function isValidGitSha(ref) {
        // allow short or full SHA (7..40 hex)
        return /^[a-f0-9]{7,40}$/i.test(ref);
      }

      async function fetchLatestRef() {
        // cache-bust + no-store to fight browser/proxy caches for the tiny pointer file
        var url = LATEST_TXT_URL + "?t=" + Date.now();

        var res = await fetch(url, { cache: "no-store" });
        if (!res.ok) throw new Error("Failed to fetch latest.txt: " + res.status);

        var ref = (await res.text()).trim();
        if (!isValidGitSha(ref)) throw new Error("latest.txt returned invalid SHA: " + ref);

        return ref;
      }

      function loadScript(src) {
        return new Promise((resolve, reject) => {
          var script = document.createElement("script");
          script.src = src;
          script.onload = resolve;
          script.onerror = () => reject(new Error("Failed to load script: " + src));
          document.body.appendChild(script);
        });
      }

      loadingBar.style.display = "block";

      (async function bootUnity() {
        var ref;
        try {
          ref = await fetchLatestRef();
        } catch (e) {
          console.warn("latest.txt fetch failed, falling back to @main (may be stale):", e);
          ref = "main"; // fallback branch
        }

        var buildUrl = REPO_CDN_BASE + ref;

        var loaderUrl = buildUrl + "/" + UNITY_FILES.loader;

        var config = {
          dataUrl: buildUrl + "/" + UNITY_FILES.data,
          frameworkUrl: buildUrl + "/" + UNITY_FILES.framework,
          codeUrl: buildUrl + "/" + UNITY_FILES.wasm,
          streamingAssetsUrl: "StreamingAssets",
          productVersion: "0.302",
          showBanner: unityShowBanner,
        };

        try {
          await loadScript(loaderUrl);
        } catch (e) {
          alert(e.message || String(e));
          return;
        }

        createUnityInstance(canvas, config, (progress) => {
          progressBarFull.style.width = (100 * progress) + "%";
        }).then((unityInstance) => {
          loadingBar.style.display = "none";

          window.unityInstance = unityInstance;
          window.unityGame = unityInstance;

          initializeFirebase(unityInstance);
          initializeUtils(unityInstance);

        }).catch((message) => {
          alert(message);
        });
      })();
    </script>

    <style>
  #ad-container {
    position: fixed;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: min(728px, calc(100% - 20px));
    height: 90px;
    background: rgba(0, 0, 0, 0.90);
    display: none;
    z-index: 99999;
    overflow: hidden;
    box-shadow: 0 -2px 12px rgba(0, 0, 0, 0.45);
    transition: transform 0.5s ease-in-out;
  }

  #ad-container.hidden { transform: translate(-50%, 100%); }

  #ad-iframe {
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 745px;
    height: 90px;
    border: 0;
  }

  /* Close button: Initial Top Center */
  #close-ad {
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%) scale(0.9);
    transform-origin: center;
    background: #ff4d4d;
    color: #fff;
    border: none;
    padding: 5px 10px;
    font-size: 11px;
    font-weight: bold;
    border-radius: 4px;
    cursor: not-allowed;
    opacity: 0.9;
    z-index: 100000;
    white-space: nowrap;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }

  /* Corner State Styling */
  #close-ad.enabled {
    cursor: pointer;
    opacity: 1;
    background: #ff1a1a;
    box-shadow: 0 0 15px #ff4d4d, 0 0 30px #ff4d4d;
    animation: glow-pulse 1.5s infinite alternate;
  }

  @keyframes glow-pulse {
    from { box-shadow: 0 0 5px #ff4d4d, 0 0 10px #ff4d4d; }
    to { box-shadow: 0 0 20px #ff4d4d, 0 0 35px #ff4d4d; opacity: 0.8; }
  }

  #close-ad::before {
    content: 'âœ•';
    margin-right: 2px;
  }

  @media (max-width: 440px) {
    #ad-container { width: calc(100% - 12px); }
    #ad-iframe { width: 728px; }
  }
</style>

<div id="ad-container" aria-hidden="true">
  <iframe id="ad-iframe" src="https://script.google.com/macros/s/AKfycbxAZ0PV-KYd1bbw1BBD9J88dBWC-BrAiTQXx7l0wIfdR-iPl_h4rkPGwzf4rV-Q_Nj_Xg/exec" scrolling="no" frameborder="0" sandbox="allow-scripts allow-popups allow-same-origin"></iframe>
  <button id="close-ad" disabled>Wait (12)</button>
</div>

<script>
  (function () {
    const showDelay = 2000; 
    const countdownStart = 12; 
    const reappearDelay = 150000; // 2.5 MINUTES (150 seconds)
    const adContainer = document.getElementById('ad-container');
    const closeBtn = document.getElementById('close-ad');

    function setRandomCorner() {
      const corners = [
        { top: '2px', left: '2px', right: 'auto', bottom: 'auto', transform: 'scale(0.5)' },    // Top-Left
        { top: '2px', left: 'auto', right: '2px', bottom: 'auto', transform: 'scale(0.5)' },   // Top-Right
        { top: 'auto', left: '2px', right: 'auto', bottom: '2px', transform: 'scale(0.5)' },   // Bottom-Left
        { top: 'auto', left: 'auto', right: '2px', bottom: '2px', transform: 'scale(0.5)' }    // Bottom-Right
      ];
      
      const randomChoice = corners[Math.floor(Math.random() * corners.length)];
      Object.assign(closeBtn.style, randomChoice);
    }

    function resetToCenter() {
      closeBtn.style.top = '0';
      closeBtn.style.left = '50%';
      closeBtn.style.right = 'auto';
      closeBtn.style.bottom = 'auto';
      closeBtn.style.transform = 'translateX(-50%) scale(0.9)';
    }

    function showAd() {
      resetToCenter();
      adContainer.style.display = 'block';
      adContainer.classList.remove('hidden');
      
      let timeLeft = countdownStart;
      closeBtn.disabled = true;
      closeBtn.classList.remove('enabled');
      closeBtn.textContent = `Wait (${timeLeft})`;

      const t = setInterval(() => {
        timeLeft--;
        if (timeLeft > 0) {
          closeBtn.textContent = `Wait (${timeLeft})`;
        } else {
          clearInterval(t);
          closeBtn.disabled = false;
          closeBtn.textContent = ''; 
          setRandomCorner(); 
          closeBtn.classList.add('enabled'); 
        }
      }, 1000);
    }

    setTimeout(showAd, showDelay);

    closeBtn.addEventListener('click', () => {
      if (closeBtn.disabled) return;
      adContainer.classList.add('hidden');
      // Set to reappear after 150 seconds
      setTimeout(showAd, reappearDelay);
    });
  })();
</script>

  </body>
</html>


]]></Content>
</Module>